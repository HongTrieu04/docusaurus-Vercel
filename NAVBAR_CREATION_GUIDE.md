# ğŸ“Š Navbar Auto-Creation System

## Overview

This Docusaurus site now has a complete **automated navbar management system**. No manual configuration needed!

## How It Works

### 1. **Access the Admin Dashboard**
Go to `/admin` (available in the navbar as "âš™ï¸ Admin")

### 2. **Create a New Navbar**
- Fill in the form with:
  - **Folder ID**: Lowercase identifier (e.g., `guides`, `api-docs`, `tutorials`)
  - **Display Label**: How it appears in navigation (e.g., "Guides", "API Docs")
  - **Type**: Usually `docSidebar` for documentation
  - **Position**: Where it appears (left or right of navbar)
  - **Order**: Lower numbers = appears first

### 3. **Click "Create Navbar"**
The system automatically:
- âœ… Creates `/guides/` folder (or whatever ID you chose)
- âœ… Creates `navbar.json` metadata file
- âœ… Creates `intro.md` initial page
- âœ… Updates `sidebars.js` with sidebar config
- âœ… GitHub commit happens via Vercel
- âœ… Vercel rebuilds the site
- âœ… New navbar item appears on your site!

### 4. **Manage Your Content**
- Use Decap CMS at `/admin` to add more pages
- Or edit markdown files directly and commit to GitHub

## Example: Creating a "Guides" Section

**Form Input:**
```
ID: guides
Label: Guides
Type: docSidebar
Position: left
Order: 0
```

**Result:**
- New folder created: `/guides/`
- File structure:
  ```
  /guides/
    â”œâ”€â”€ navbar.json      (metadata)
    â””â”€â”€ intro.md         (initial page)
  ```
- `sidebars.js` auto-updated with:
  ```javascript
  guides: [{type: 'autogenerated', dirName: '.'}],
  ```
- Navbar item added automatically to `docusaurus.config.js`

## Technical Details

### Architecture

**File Structure:**
```
project-root/
â”œâ”€â”€ docs/               (existing documentation)
â”œâ”€â”€ blog/               (existing blog)
â”œâ”€â”€ guides/             (new - auto-created via admin)
â”‚   â”œâ”€â”€ navbar.json     (metadata)
â”‚   â””â”€â”€ intro.md        (initial page)
â”œâ”€â”€ api/
â”‚   â””â”€â”€ navbars.js      (API endpoint for folder management)
â”œâ”€â”€ src/pages/
â”‚   â”œâ”€â”€ admin.jsx       (admin dashboard UI)
â”‚   â””â”€â”€ admin.module.css
â”œâ”€â”€ docusaurus.config.js (loads navbars dynamically)
â””â”€â”€ sidebars.js         (auto-updated)
```

### API Endpoint: `/api/navbars.js`

**GET** - List all navbars:
```bash
GET /api/navbars
```
Returns: Array of navbar metadata

**POST** - Create new navbar:
```bash
POST /api/navbars
Body: { id: "guides", label: "Guides" }
```
- Creates folder
- Creates `navbar.json`
- Creates `intro.md`
- Updates `sidebars.js`

**DELETE** - Remove navbar:
```bash
DELETE /api/navbars
Body: { id: "guides" }
```
- Deletes folder
- Removes from `sidebars.js`
- Protected folders (docs, blog, src, etc.) cannot be deleted

### Dynamic Navbar Loading

**In `docusaurus.config.js`:**
```javascript
function loadDynamicNavbars() {
  // Scans project root for folders with navbar.json
  // Returns navbar item configurations
  // Automatically integrated into navbar.items
}
```

This function:
1. Looks for folders at project root
2. Checks for `navbar.json` metadata file
3. Loads configuration from each `navbar.json`
4. Returns sorted array of navbar items
5. Merged with static items (Tutorial, Blog, Admin)

### Sidebar Auto-generation

**When a navbar is created:**
- API adds entry to `sidebars.js`:
  ```javascript
  navbarId: [{type: 'autogenerated', dirName: '.'}]
  ```
- Docusaurus auto-generates sidebar from folder structure
- Pages in `/guides/` automatically appear in sidebar
- Respects frontmatter `sidebar_position` for ordering

## Workflow: Complete Example

### Step 1: Create Navbar via Admin
```
ID: tutorials
Label: Tutorials
Type: docSidebar
```

### Step 2: Automatic Results
- âœ… `/tutorials/` folder created
- âœ… `/tutorials/intro.md` created with intro content
- âœ… `/tutorials/navbar.json` created with metadata
- âœ… `sidebars.js` updated:
  ```javascript
  tutorials: [{type: 'autogenerated', dirName: '.'}],
  ```
- âœ… `docusaurus.config.js` dynamically loads it
- âœ… Navbar shows new "Tutorials" item
- âœ… GitHub commit created (Vercel auto-commits)
- âœ… Vercel rebuilds site

### Step 3: Add More Pages
Add markdown files in `/tutorials/`:
```
/tutorials/
â”œâ”€â”€ intro.md
â”œâ”€â”€ getting-started.md
â”œâ”€â”€ advanced-topics.md
â””â”€â”€ faq.md
```

Each file automatically becomes a page in the Tutorials section.

### Step 4: Edit Content
- Use Decap CMS at `/admin` to edit pages
- Or edit `.md` files directly and commit

## Metadata File: `navbar.json`

Each navbar folder has a `navbar.json` metadata file:

```json
{
  "id": "guides",
  "label": "Guides",
  "type": "docSidebar",
  "position": "left",
  "order": 0
}
```

**Fields:**
- `id`: Folder name (must match)
- `label`: Display text in navbar
- `type`: `docSidebar`, `doc`, or `link`
- `position`: `left` or `right`
- `order`: 0-999 (lower = appears first)

## Safety Features

### Protected Folders
These folders **cannot be deleted** via the admin system:
- `docs` (default documentation)
- `blog` (default blog)
- `src` (source code)
- `static` (static assets)
- `node_modules` (dependencies)

### Validation
- Folder IDs must be lowercase alphanumeric + hyphens
- Duplicate IDs are prevented
- Existing folders cannot be overwritten
- Metadata parsing is robust (falls back to defaults)

## Troubleshooting

### Navbar doesn't appear after creation
1. Check `/admin` page loads successfully
2. Verify folder was created at project root
3. Check `navbar.json` has correct metadata
4. Wait for Vercel rebuild (1-2 minutes)
5. Hard refresh browser (Ctrl+Shift+R)

### Pages don't show in sidebar
1. Check markdown files are in the navbar folder
2. Ensure `sidebars.js` has the navbar entry
3. Check file names don't start with underscore
4. Verify frontmatter is valid YAML

### Can't create navbar
1. Check folder ID is valid (lowercase, hyphens ok)
2. Ensure folder doesn't already exist
3. Check API endpoint is accessible (/api/navbars)
4. Look at browser console for error messages

## Advanced Usage

### Reordering Navbars
Update `navbar.json` files directly and commit:
```json
{
  "order": 1  // Change this value
}
```

### Custom Sidebar Layouts
Edit `sidebars.js` to customize sidebar for specific navbar:
```javascript
guides: [
  'intro',
  {
    type: 'category',
    label: 'Advanced',
    items: ['advanced-topics', 'faq'],
  },
],
```

### Linking External Sites
In `navbar.json`, change type to `link`:
```json
{
  "type": "link",
  "href": "https://external-site.com"
}
```

## Next Steps

1. âœ… Go to `/admin`
2. âœ… Create your first navbar
3. âœ… Watch it appear on the site
4. âœ… Edit content via Decap CMS
5. âœ… Commit and deploy via Vercel

No manual steps. Everything is automatic! ğŸ‰
